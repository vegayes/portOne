<!DOCTYPE html>
<html lang="en" xmlns="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Spring Boot 테스트</title>
    </head>
    <body>
        <h1>메인 페이지 입니다.</h1>

        <h1 th:text="${message}">여기에 message가 출력됩니다. </h1>
        
        <input type = "text" th:value="${message}">
        
        <script th:inline = "javascript">

            const message = /*[[${message}]]*/ "전달 받은 message";

            alert(message);

        </script>
        
        
    <button onclick="requestPay()">결제하기</button>


        
        
        <!-- 결제 모달창 --> 
        <script type="text/javascript" th:src="@{https://cdn.iamport.kr/js/iamport.payment-1.1.5.js}"></script>
		<script type="text/javascript" th:src="@{https://code.jquery.com/jquery-1.12.4.min.js}" ></script>		
	    
	    <script>
	        var IMP = window.IMP;
	        IMP.init("impXXXXXXXXX");
	
	        function requestPay() {
	            IMP.request_pay(
	                {
	                    pg: "html5_inicis",		//KG이니시스 pg파라미터 값
	                    pay_method: "card",		//결제 방법
	                    merchant_uid: "1234578",//주문번호
	                    name: "당근 10kg",		//상품 명
	                    amount: 200,			//금액
	      				buyer_email: "gildong@gmail.com",
	      				buyer_name: "홍길동",
	      				buyer_tel: "010-4242-4242",
	      				buyer_addr: "서울특별시 강남구 신사동",
	      				buyer_postcode: "01181"
	     	
	                },
	                function (rsp) {
	      				//rsp.imp_uid 값으로 결제 단건조회 API를 호출하여 결제결과를 판단합니다.
	                    if (rsp.success) {
	                        //서버 검증 요청 부분
	                    } else {
	                        alert("결제에 실패하였습니다. 에러 내용: " + rsp.error_msg);
	                    }
	                }
	            );
	        }
    	</script>
    

	
	
	
    </body>
</html>